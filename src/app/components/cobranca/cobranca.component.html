<div class="cobranca-container">
  <h2>ğŸ“ CobranÃ§a</h2>

  <div class="tabela-container">
    <table class="cobranca-table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Cliente</th>
          <th>FrequÃªncia</th>
          <th>Valor Original</th>
          <th>Valor Total (c/ juros)</th>
          <th>Data Contrato</th>
          <th>PrÃ³ximo Vencimento</th>
          <th>Status</th>
          <th>AÃ§Ãµes</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let e of emprestimos">
          <td>#{{ e.id }}</td>
          <td>{{ getClienteNome(e.clienteId, e) }}</td>
          <td>{{ e.frequencia === 'quinzenal' ? 'Quinzenal (15d)' : 'Mensal (30d)' }}</td>
          <td>{{ formatCurrency(e.valorOriginal) }}</td>
          <td>{{ formatCurrency(calcularValorTotalComMulta(e)) }}</td>
          <td>{{ formatDate(e.dataContrato) }}</td>
          <td>{{ formatDate(e.proximoVencimento) }}</td>
          <td>{{ e.status }}</td>
          <td class="acoes">
            <!-- Mensagem de lembrete/padrÃ£o -->
            <a class="btn-icon whats" [href]="getWhatsAppLink(e)" target="_blank" *ngIf="getWhatsAppLink(e)" title="Lembrete via WhatsApp">ğŸ’¬</a>
            <!-- Mensagem especÃ­fica para renovar -->
            <a class="btn-small" [href]="getWhatsAppLinkForAction(e, 'renovar')" target="_blank" *ngIf="getWhatsAppLinkForAction(e, 'renovar')" title="Enviar mensagem para RenovaÃ§Ã£o">ğŸ”</a>
            <!-- Mensagem especÃ­fica para quitaÃ§Ã£o -->
            <a class="btn-small danger" [href]="getWhatsAppLinkForAction(e, 'quitar')" target="_blank" *ngIf="getWhatsAppLinkForAction(e, 'quitar')" title="Enviar mensagem para Quitar">âœ…</a>
          </td>
        </tr>
      </tbody>
    </table>

    <div *ngIf="emprestimos.length === 0" class="sem-dados">Nenhum emprÃ©stimo para cobranÃ§a.</div>
  </div>
</div>
